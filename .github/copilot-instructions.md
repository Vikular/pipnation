<!-- Autogenerated guidance for AI coding agents. Keep concise and repo-specific. -->
# Copilot instructions for this repository

This repository is a Vite + React (SWC) single-page app that uses Supabase for auth and backend functions. The instructions below summarize the architecture, developer workflows, conventions, and integration points that help an AI coding agent be productive quickly.

- Project type: Vite + React (plugin: `@vitejs/plugin-react-swc`). Dev server: `vite` (port 3000 by default).
- Key scripts (see `package.json`):
  - dev: start dev server (`vite`).
  - build: bundle to `build/` (Vite outDir).
  - Install dependencies with `npm i` before running.

- High-level architecture / why things are arranged this way:
  - Frontend-only repo (no backend code here). The SPA communicates with Supabase (client + Edge Functions).
  - Supabase client singleton lives at `src/utils/supabase/client.tsx` and config values are in `src/utils/supabase/info.tsx`.
  - Many app-level flows are coordinated from `src/App.tsx` (routing-like view state, auth, progress, and calls to Edge Functions). Read `App.tsx` to understand view routing and auth flow.

- Important integration points (search/edit here when changing API/auth flows):
  - `src/utils/supabase/info.tsx` ‚Äî contains `projectId` and `publicAnonKey`. Change these to point to a different Supabase project.
  - `src/utils/supabase/client.tsx` ‚Äî creates the `supabase` client used across the app.
  - In `src/App.tsx` the frontend composes an Edge Functions base URL like:
    `const apiUrl = \`https://${projectId}.supabase.co/functions/v1/make-server-0991178c\``
    and calls routes: `/user/signup`, `/user/{id}`, `/progress/lesson`, `/quiz/submit`, `/ftmo/submit`.
  - Auth tokens are stored in localStorage under keys `accessToken` and `userId`. Many fetch calls use `Authorization: Bearer <token>`.

- Project-specific conventions and patterns:
  - Vite aliases: `@` -> `./src` (see `vite.config.ts`). Use `@/` imports for cross-file navigation.
  - There are non-standard alias mappings in `vite.config.ts` mapping strings like `sonner@2.0.3` or `@jsr/supabase__supabase-js@2.49.8` to package names ‚Äî be careful when renaming imports or bumping packages; update the alias mappings accordingly.
  - Many documentation/status files live under `src/` (eg. `‚≠ê_READ_ME_FIRST.md`, lots of `‚úÖ_` / `üîß_` docs). Read these when debugging environment or deployment notes.
  - Several static HTML demo pages exist (`admin-setup.html`, `create-admin.html`, etc.) ‚Äî they can be opened directly in dev server or used as references for manual flows.

- Debugging & developer tips (fast wins):
  - Enable diagnostics UI: open the app with `?diagnostics` query param ‚Äî `App.tsx` renders `ServerDiagnostics` when present.
  - Auth testing UI: open with `?test-auth` query param to access `AuthTester`.
  - App logs extensively with console.* calls ‚Äî review browser console to follow flow (signup, signin, profile fetch, enrollment).
  - If changing API routes or auth, update both `src/App.tsx` and `src/utils/supabase/info.tsx` (client keys + function route base).

- Common pitfalls to watch for:
  - Changing Supabase keys without updating `info.tsx` and redeploying Edge Functions will break signup/login flows.
  - Token handling: the app clears tokens on 401/failed profile fetch. Preserve localStorage keys (`accessToken`, `userId`) if simulating an authenticated session.
  - Import alias collisions: because `vite.config.ts` includes many alias mappings, running `npm i` and changing package names may require editing the alias table.

- Quick examples (where to edit):
  - Update projectId/publicAnonKey: `src/utils/supabase/info.tsx`.
  - Update function base path or endpoints: `src/App.tsx` (search for `make-server-0991178c` and `/user/signup`).
  - Add new UI routes/views: `src/App.tsx` controls view state (`currentView`) and conditionally renders `LandingPage`, `StudentDashboard`, `EnhancedAdminDashboard`, etc.

- Build, run and test (developer workflow):
  - Install: npm i
  - Dev: npm run dev (opens at http://localhost:3000 by default)
  - Build: npm run build (output: `build/`)

If you need me to incorporate additional details (for example, references to a backend repo that owns the Supabase Edge Functions or environment-specific deployment notes), point me to that repo or paste the function routes and I will merge them into this guidance.

---
If anything here is unclear or you want more detail in a particular section (examples of where to change a token, or a short checklist for running local end-to-end auth), tell me which part and I'll iterate.
